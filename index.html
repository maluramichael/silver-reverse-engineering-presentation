<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Game Reverse Engineering 101</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/blood.css">
    <link rel="stylesheet" href="css/style.css">
    
		<!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    
    <script src="plugin/highlight/highlight.js"></script>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
          <div>Game Reverse Engineering 101</div>
          <div class="small">oder: Wie modifiziere ich ein Spiel?</div>
          <aside class="notes">
            Ich moechte euch heute etwas ueber reverse engineering erzaehlen, was ich gelernt habe und was ich damit anstellen moechte. Das ganze speziell im Gaming Bereich und fuer meine Beispiel werde ich das Spiel Silver nutzen.
          </aside>
        </section>
        <section>
          <section>
            <div>Was ist Reverse Engineering?</div>
            <aside class="notes">
              Reverse engineering bedeutet 'umgekeht entwickeln'. Man versucht herauszufinden wie etwas gebaut wurde um es dann entweder zu veraendern, erweitern oder nachzubauen.
            </aside>
          </section>
          <section>
            <pre><code class="c++">int main() {
  Game myGame;
  myGame.init();
  while(myGame.running) {
    myGame.handleInput();
    myGame.updateLogic();
    myGame.render();
  }
  return 0;
}</code></pre>
          <aside class="notes">
            Meist werden Spiele in einer sogenannten Hochsprache entwickelt. Das hier ist ein super simples Beispiel in C++. 
          </aside>
          </section>
          <section>
            <pre><code class="asm">mov     ds:dword_55606C, ecx
add     edx, [eax+0Ch]
add     ebx, [eax+10h]
add     edx, ds:dword_5D1BD0[ebx*4]
add     edx, ds:dword_5913C8
mov     esi, eax
mov     edi, edx
mov     eax, [esi+4]
mov     ebx, [esi+8]
mov     ecx, [esi]
...</code></pre>
            <aside class="notes">
              Der Computer versteht keine Hochsprache. Also wird dieser Code in die Maschinensprache uebersetzt (compiliert).
            </aside>
          </section>
          <section>
            ... super f√ºr einen üñ•Ô∏è und schlecht f√ºr ü§∑üèª‚Äç‚ôÇÔ∏è
          </section>
        </section>
        <section>
          <ul>
            <li>Bin√§rcode mit einem Disassambler in Maschinensprache √ºbsersetzen</li>
            <li>Maschinensprache nun mit einem Decompiler in eine Hochsprache √ºbersetzen</li>
            <li>Neuer Code != Original Code</li>
          </ul>
          <aside class="notes">
            Beim Reverse engineering geht man nur umgekeht vor. Aus Bin√§rcode wird Maschinensprache und daraus dann wieder eine Hochsprache. Der neue Code ist aufkeinenfall der selbe wie der der Original Code.
            Der Compiler optimiert beim √úbersetzen den Code und dadurch gehen sehr viele Informationen des Original Codes verloren. Zum Beispiel gibt es keine Variablennamen mehr, Schleifen werden aufgeloest und Kommentare entfernt.
          </aside>
        </section>
        <section>
          <img src="images/snowman_silver.png">
          <aside class="notes">
            Hier sieht man jetzt so einen decompilierten Code. Man versucht jetzt beim reverse engineering R√ºckschl√ºsse daraus auf den original Code zu ziehen.
          </aside>
        </section>
        <section>
          <img src="images/but-why.jpg">
          <aside class="notes">
            Ihr fragt euch sicherlich jetzt warum.
          </aside>
        </section>
        <section> <!-- Warum RE? -->
            <p class="fragment">Neugier</p>
            <p class="fragment"><img src="images/silver_memory_dump.jpg"></p>
            <p class="fragment">Spa√ü</p>
            <p class="fragment">Profit</p>
            <p class="fragment">Anerkennung</p>
          <aside class="notes">
            <ul>
              <li>Neugier: Ich moechte wissen wie der Entwickler Funktion XY implementiert hat. Oder ob sich der Entwickler einen Spa√ü gemacht hat und irgendetwas im Spiel versteckt hat.</li>
              <li>Spa√ü: Es ist lustig sich einfach mal die tausendfache St√§rke zu geben und unbesigbar durchs Spiel rennen zu k√∂nnen.</li>
              <li>Profit: Nat√ºrlich gibt es auch Menschen die Ihre Hacks verkaufen.</li>
              <li>Anerkennung: Es ist sch√∂n Lob von anderen zu bekommen wenn man etwas geschafft hat was nicht so vorgesehen ist.</li>
            </ul>
          </aside>
        </section>
        <section>
          <ul>
            <li class="fragment">Remakes / Open Source Engines <span class="small">(OpenRA, OpenAge, freeablo)</span></li>
            <li class="fragment">Patches <span class="small">(Bugfixes)</span></li>
            <li class="fragment">Mods <span class="small">(TurboHUD, GTA Multiplayer)</span></li>
            <li class="fragment">Private Server <span class="small">(WoW)</span></li>
            <li class="fragment">Cheats <span class="small">(Trainer, Wallhacks, Aimbot)</span></li>
          </ul>
          <aside class="notes">
            <ul>
              <li>Also was kann man nun alles damit anstellen?</li>
              <li>Remakes: Man kann alten Spielen ein neues Leben geben. Einige Spiele laufen nicht auf neuen System oder sind nur fuer eine Platform verfuegbar. Drum koennte man ein Remake des Spiels bauen welches auf neuen aktuellen Geraeten laueft.</li>
              <li>Patches: Der Entwickler hat einen Fehler gemacht welcher nur auf einem neuen Windows auftritt? Dieser kann behoben werden.</li>
              <li>Mods: In Diablo 3 fehlten den Spielern einige Funktionen wie der aktuelle "Schaden pro Sekunde" also wurde TurbuHUD entwickelt. Ein Overlay welches ganz viele Informationen ueber das original Spiel legt.</li>
              <li>Oder GTA San Andreas. Das Spiel ist ein reines Single Player Abenteuer. Das passte einigen Entwicklern nicht also haben sie einen Multiplayer Mod geschrieben.</li>
              <li>Private Server: Man erstellt einen eigenen Server fuer ein Multiplayer Spiel</li>
              <li>Cheats: Man kann herausfinden wie die Trefferpunkte im Spiel berechnet werden und dann eine Funktion schreiben die einen unbesiegbar macht.</li>
            </ul>
          </aside>
        </section>
        <section>
          <section>
            <div>Disassembler (IDA)</div>
            <img src="images/ida_silver.png">
          </section>
          <section>
            <div>Memory Scanner (Cheat Engine)</div>
            <img src="images/ce_silver.png">
          </section>
          <section>
            <div>Debugger (x64dbg)</div>
            <img src="images/x64dbg_silver.png">
          </section>
          <section>
            <div>Decompiler (Snowman)</div>
            <img src="images/snowman_silver.png">
          </section>
          <section>
            <div>Memory Dissector (ReClassEx)</div>
            <img src="images/reclass_silver.png">
          </section>
          <section>
            <div>Binary Parser (Kaitai Struct)</div>
            <img src="images/kaitai.jpg">
          </section>
        </section>
        <section>
          <div>Demo</div>
          <aside class="notes">
            Ich moechte euch MEINE ersten Schritte zeigen. Leider kann ich das jetzt nicht live zeigen aber ihr koennt mich gerne nachher mal ansprechen dann zeig ich es euch an meinem anderen Rechner.
          </aside>
        </section>
        <section>
          <section>
            <img src="images/open_cheat_engine.png">
            <aside class="notes">
              Cheat Engine √∂ffnen und ans Spiel h√§ngen.
            </aside>
          </section>
          <section>
            <img src="images/silver_health_highlighted.png">
            <aside class="notes">
              Wir suchen einen einfach zu beeinflussenden Wert ausw√§hlen. In diesem Fall das aktuelle Leben.
            </aside>
          </section>
          <section>
            <img src="images/cheat_engine_search_health.png">
            <aside class="notes">
              Jetzt suchen wir nach diesem Wert im Speicher des Spiels.
            </aside>
          </section>
          <section>
            <img src="images/change_value_in_game.png">
            <aside class="notes">
              Zurueck im Spiel muessen wir den Wert veraendern. Ich lasse mich jetzt hier einfach von einem Gegner treffen.
            </aside>
          </section>
          <section>
              <img src="images/search_changed_value.png">
              <aside class="notes">
                Wenn wir jetzt nach dem neuen Wert suchen werden nur die vorher gefundenen Werte durchsucht. Jeder Wert der nicht dem neuen passt wird verworfen.
                Normalerweise muss man das ganze jetzt einige Male wiederholen bis man sich sicher ist das man den richtigen Wert gefunden hat.
              </aside>
            </section>
          <section>
            <img src="images/change_value_in_cheat_engine.png">
            <aside class="notes">
              Jetzt aendern wir die Stelle im Speicher und ueberpruefen ob wir die richtige Variable gefunden haben.
            </aside>
          </section>
          <section>
            <div>üéâüéâüéâ</div>
            <img src="images/silver_changed_value.png">
          </section>
          <section>
            <img src="images/save_cheat_table.png">
            <aside class="notes">
              Die sog. Cheat Table koennte jetzt noch angepasst und erweitert werden. Wir koennen unseren Fortschritt auch speichern und spaeter hier wieder weiter machen.
            </aside>
          </section>
          <section>
            <div>ü§î</div>
            <aside class="notes">
              Ihr fragt euch sicherlich: Das ist ja nur eine kleiner Memory Hack. Wir wollen doch Spiele modifizieren.
              Ja das stimmt auch aber es ist ein kleiner Schritt auf einer ganz langen Reise.
              Beim Reverse Engineering geht es darum viele Informationen zu finden und sich zu nutze zu machen.
              Wir wissen jetzt wo im Speicher das Leben des Spielers steht von hier aus koennen wir uns durch den Code hangeln.
            </aside>
          </section>
        </section>
        <section>
          <section>
            <img src="images/fullCheat.png">
            <aside class="notes">
              Ich moechte euch jetzt kurz meinen Weg auf der langen Reise zeigen.
              Zu aller erst hab ich natuerlich mit Cheat Engine im Speicher herumgesucht und mit den Werten gespielt.
            </aside>
          </section>
          <section>
            <img src="images/memoryWrite.png">
            <aside class="notes">
              Ich wollte wissen wie man einen Trainer schreibt und ein Spiel von au√üen veraendert.
            </aside>
          </section>
          <section>
            <img src="images/imgui_overlay.png">
            <aside class="notes">
              Danach habe ich herausgefunden wie man die Zeichenfunktionen des Spiels nutzen kann um eigene Grafik auf dem Bildschirm bringen.
            </aside>
          </section>
          <section>
            <img src="images/silver_window_mode.png">
            <aside class="notes">
              Ich habe angefangen einen Patch fuer Silver zu schreiben um das Spiel im Fenster Modus spielen zu koennen.
            </aside>
          </section>
          <section>
            <img src="images/kaitai.jpg">
            <aside class="notes">
              Aktuell versuche ich die Bilder, Levels, Sounds usw aus dem Spiel zu extrahieren. Dafuer nutze ich Kaitai um zu verstehen wie die Binaerdateien aufgebaut sind.
            </aside>
          </section>
          <section>
            <p>Und danach?</p>
            <aside class="notes">
              Ich wuerde gerne eine Open Source Variante des Spiels entwickeln. Das hat eigentlich keinen besonderen Grund. Ich hab mir Silver ausgesucht weil es recht alt und ziemlich einfach aufgebaut ist.
              Als Einstiegsprojekt also eine gute Wahl.
            </aside>
          </section>
        </section>
        <section>
          <div>üéâ Dankesch√∂n ‚ù§Ô∏è</div>
          üëèüèªüëèüèªüëèüèªüëèüèªüëèüèª
        </section>
        <section>
          <ul>
            <li>Mail: michael@malura.de</li>
            <li>Twitter: @devnetik</li>
          </ul>
          <aside class="notes">
            Und weil das Thema so umfangreich ist k√∂nnt ihr mich gerne jederzeit Fragen. Entweder ueber Twitter oder per Mail. Oder ihr sprecht mich einfach persoenlich an. Danke.
          </aside>
        </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
